### 프로그램

1. 자바스크립트는 실행되어야 하는 웹 사이트에 소스 형태로 제공된다.

   - 자바스크립트의 첫 번째 임무는 웹 페이지에 몇 가지 상호 작용 기능을 구현하는 것이었다.
   - HTML이 텍스트 형태였기 때문에, 자바스크립트 역시 웹 페이지에 텍스트 형태로 삽입되는 것으로 결정되었다.

2. **자바스크립트 엔진**은 자바스크립트 소스 코드를 컴파일해서 **기계어나 중간 언어**, 혹은 둘 다로 변환한다.

   - 그래서 자바스크립트는 **이식성**이 아주 뛰어나다. 실행되는 기계의 구조와 프로그램 사이에 아무런 의존성이 없는 것이다.
   - **자바스크립트 프로그램은 기저가 무엇이든 상관없이, 어떤 자바스크립트 엔진에서도 수정없이 동작**한다.

3. 예전의 웹 브라우저에서 소스 코드들은 `<script>` 태그나 인라인 이벤트 핸들러에 포함되어 **페이지 단위로 나눠지는 경우**가 많았다.

   - 최근에는 자바스크립트 코드를 HTML 페이지에 포함시키는 것이 좋지 않다는 생각이 지배적이다.
   - 우선 **디자인 측면**에서 **화면에 표현하는 부분**과 **동작하는 부분**을 구분할 수 없으니 좋지 않다.
   - **성능**상으로도 페이지에 있는 코드를 압축하거나 캐싱할 수 없다.
   - **보안**상으로도 **XSS(Cross Site Scripting) 공격**을 받을 수 있기 때문에 좋지 않다.
   - 따라서 W3C의 **콘텐츠 보안 정책(Content Security Policy, CSP)**을 지속적으로 사용해서 **페이지 내에 소스 코드를 포함시키지 않도록** 해야 한다.

4. 자바스크립트 코드는 일반적으로 이벤트나 메시지를 **전달받으면 실행되도록 등록**되거나, 혹은 다른 쪽에서 사용할 수 있도록 함수를 **익스포트(export)**하는 데 많이 사용된다.

   - 자바스크립트가 원래 이런 식으로 사용될 거라고 예상하지는 못했겠지만, 이는 프로그램을 만드는 아주 좋은 방법이며 자바스크립트는 다른 어떤 언어보다도 이런 방식의 프로그래밍을 잘 지원한다.

5. 모든 소스 단위에 자동으로 만들어지는 객체와 함수들이 있다.
   - ECMAScript 표준에서 제공하는 것들이다.
   - 추가로 실행되는 환경(웹 브라우저, Node.js 등)에서 더 추가할 수도 있다.

<hr/>

### 전역 변수

1. **옛날 브라우저의 프로그래밍 모델**에서는 **함수 바깥의 모든 함수 선언**이 **페이지 스코프(전역/global 스코프)**에 추가되었다.

   - 전역 스코프에는 **window 변수**와 **페이지 스코프에 대한 참조가 포함된 self 변수**가 있다.

2. 페이지 스코프에 있는 모든 변수는 **해당 페이지에서 사용하는 모든 소스 단위에서 볼 수 있다**.

   - 이는 좋지 않다. **공유된 전역 변수**를 통해서 **보안 취약점**이 발생할 수 있으며, **좋지 않은 프로그래밍 습관**을 유발한다.

3. 전역 변수는 악의 근원이다. 다행히 더 좋은 방법이 있다.

<hr/>

### 모듈

1. 함수 바깥에 변수를 선언하는 더 좋은 방법은 **모듈 스코프에 선언**하는 것이다.

   - 모듈 스코프의 변수들은 해당 소스 유닛에 있는 함수들만 볼 수 있다.
   - 다른 소스 단위와 함께 쓰려면 `import`와 `export` 문을 써서 명시적으로 하게 된다.

2. `export`함으로써 모듈은 **다른 모듈에게** 자신의 기능을 사용할 수 있도록 **허용**한다.

   - 모듈은 일반적으로 하나의 함수, 또는 함수로 가득찬 한 개의 객체와 같이 **한 가지만 `export`해야 한다**. 예상하지 못한 오류나 교차 오염을 막기 위해서 `export` 되는 내용을 동결하는 것이 좋다.
   - `export`는 일종의 인터페이스이다. 인터페이스는 간단하고 명료해야 한다.

3. `export`된 내용은 자체 상태를 가지고(stateful) 있다.

   - `import`해서 쓰는 곳에서 이들이 아주 깨끗하고 공유되지 않는 **인스턴스**라고 생각하고 싶다면, 깨끗하고 공유되지 않는 인스턴스를 만들 수 있는 팩토리 함수를 `export`하는 것이 좋다.
   - `export` 문은 인스턴스를 만들지는 않는다. 다음과 같이 사용할 수 있다. `export default exportation;`

4. `import` 문은 다른 위치에서 초기화된 값을 가져오는 특수한 const 문처럼 사용할 수 있다. `import name from string literal;`
   - `export` 문은 한 번만 쓰는 게 좋지만, `import` 문은 필요한 만큼 많이 사용해도 상관 없다.
   - `import` 문은 파일의 최상단에, `export` 문은 가장 아래에 쓰자.

<hr />

### 응집도(Cohesion)과 결합도(Coupling)

1. 미시적 수준에서 **좋은 프로그래밍**이란 좋은 코딩 규칙에 달려 있다.

2. 거시적 수준에서 좋은 프로그래밍은 **좋은 모듈 설계**에 달려 있다.

3. 좋은 모듈은 **응집도**가 높다. 다시 말해 모듈의 모든 요소가 어우러져 **하나의 목적을 이루기 위해 함께 동작한다**는 것이다.

   - 나쁜 모듈은 좋지 않은 구조와 더불어 모듈에서 너무 많은 일을 하려고 하다 보니 응집도가 낮다.

4. **모듈에서의 자바스크립트 함수**를 강력하게 만들려면, **모듈에서는 신경 써서는 안 될 세부 사항들을 모듈의 함수로** 전달하고 처리할 수 있도록 만들어야 한다.

5. 좋은 모듈들은 약하게 결합되어 있다.

   - 모듈의 인터페이스를 제대로 사용하기 위해서 모듈의 모든 내용을 다 알아야 할 필요는 없다.
   - 좋지 않은 모듈은 강한 결합도를 초래한다.

6. 모듈 인터페이스를 간단 명료하게 만들어라. 의존성을 최소화하라. 프로그램이 혼란에 빠지지 않고도 충분히 커지기 위해서는 좋은 구조가 꼭 필요하다.
